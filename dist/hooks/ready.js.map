{"version":3,"sources":["hooks/ready.ts"],"names":[],"mappings":"AAAA,OAAO,qBAAqB,yCAAsC;AAalE,8BAA8B;AAC9B,MAAM,SAAS,GAAG,KAAK,IAA0B,EAAE;IACjD,MAAM,UAAU,GAAG,kCAAkC,CAAC;IAEtD,IAAI;QACF,MAAM,GAAG,GAAG,MAAM,KAAK,CAAC,UAAU,CAAC,CAAC;QACpC,MAAM,QAAQ,GAAgB,MAAM,GAAG,CAAC,IAAI,EAAE,CAAC;QAC/C,OAAO,QAAQ,CAAC;KACjB;IAAC,OAAO,KAAK,EAAE;QACd,sCAAsC;QACtC,OAAO,CAAC,IAAI,CAAC,sCAAsC,CAAC,CAAC;KACtD;IACD,OAAO,IAAI,CAAC;AACd,CAAC,CAAC;AAEF,MAAM,UAAU,GAAG,CAAC,IAAiB,EAAE,EAAE;IACvC,OAAO;IACL,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,EAAE,OAAO,CAAC;;6CAEI,IAAI,CAAC,MAAM,CAAC,IAAI,yBAAyB,IAAI,CAAC,MAAM,CAAC,IAAI;GACnG,CAAC;AACJ,CAAC,CAAC;AAEF,+BAA+B;AAC/B,MAAM,SAAS,GAAG,GAAS,EAAE;IAC3B,qBAAqB,EAAE,CAAC;IAExB,mBAAmB;IACnB,SAAS,EAAE;SACR,IAAI,CAAC,CAAC,IAAiB,EAAE,EAAE;QAC1B,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;IACxD,CAAC,CAAC;SACD,KAAK,CAAC,GAAG,EAAE;QACV,sCAAsC;QACtC,OAAO,CAAC,IAAI,CAAC,wCAAwC,CAAC,CAAC;IACzD,CAAC,CAAC,CAAC;AACP,CAAC,CAAC;AAEF,eAAe,SAAS,CAAC","file":"ready.js","sourcesContent":["import registerNotifications from \"../notifications/Notification\";\n\ninterface Author {\n  name: string;\n  icon: string;\n}\n\ninterface ApiResponse {\n  id: string;\n  author: Author;\n  message: string;\n}\n\n// fetches a hint from the API\nconst fetchHint = async (): Promise<ApiResponse> => {\n  const API_SERVER = \"https://didyouknow.vttassets.com\";\n\n  try {\n    const raw = await fetch(API_SERVER);\n    const response: ApiResponse = await raw.json();\n    return response;\n  } catch (error) {\n    // eslint-disable-next-line no-console\n    console.warn(\"Unable to fetch 'Did you know?' hint\");\n  }\n  return null;\n};\n\nconst formatHint = (hint: ApiResponse) => {\n  return `<h2>Did you know?</h2>\n  ${hint.message.replace(/\\\\n/g, \"<br/>\")}\n  <div class=\"didyouknow link\"><a target=\"_blank\" href=\"https://discord.gg/yEyxJBH\">Contributed by</a></div>\n  <div class=\"didyouknow author\"><img src=\"${hint.author.icon}\"/><span class=\"name\">${hint.author.name}</span></div>\n  `;\n};\n\n// displays a fetched hint once\nconst onceReady = (): void => {\n  registerNotifications();\n\n  // fetch a new hint\n  fetchHint()\n    .then((hint: ApiResponse) => {\n      window.vtta.notification.show(formatHint(hint), null);\n    })\n    .catch(() => {\n      // eslint-disable-next-line no-console\n      console.warn(\"Unabled to display hint, fetch failed.\");\n    });\n};\n\nexport default onceReady;\n"]}